window.__require=function t(i,e,n){function c(r,a){if(!e[r]){if(!i[r]){var s=r.split("/");if(s=s[s.length-1],!i[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var d=e[r]={exports:{}};i[r][0].call(d.exports,function(t){return c(i[r][1][t]||t)},d,d.exports,t,i,e,n)}return e[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({Fruit:[function(t,i){"use strict";cc._RF.push(i,"e9776THRO5PbL7wSBQG/Mu+","Fruit"),cc.Class({extends:cc.Component,properties:{id:0,knockAudio:{default:null,type:cc.AudioClip}},init:function(t){this.id=t.id,this.node.getComponent(cc.Sprite).spriteFrame=t.iconSF},onBeginContact:function(t,i,e){if(i.node&&e.node){var n=i.node.getComponent("Fruit"),c=e.node.getComponent("Fruit");!n||c||"ground"!==e.node.group||this.isPlaying||(this.isPlaying=!0,cc.audioEngine.play(this.knockAudio,!1,1)),n&&c&&n.id===c.id?i.node.emit("sameContact",{self:i,other:e}):i.node.emit("checkBound",{self:i,other:e})}},onLoad:function(){this.isPlaying=!1}}),cc._RF.pop()},{}],Game:[function(t,i){"use strict";cc._RF.push(i,"c82b2wQklpAb7zhG4aTTqcD","Game");var e=cc.Class({name:"FruitItem",properties:{id:0,iconSF:cc.SpriteFrame}}),n=cc.Class({name:"JuiceItem",properties:{particle:cc.SpriteFrame,circle:cc.SpriteFrame,slash:cc.SpriteFrame}});cc.Class({extends:cc.Component,properties:{endNodeBG:{default:null,type:cc.Node},endNode:{default:null,type:cc.Node},fruits:{default:[],type:e},juices:{default:[],type:n},fruitPrefab:{default:null,type:cc.Prefab},juicePrefab:{default:null,type:cc.Prefab},boomAudio:{default:null,type:cc.AudioClip},waterAudio:{default:null,type:cc.AudioClip},scoreLabel:{default:null,type:cc.Label},fingerBtn:{default:null,type:cc.Button}},onLoad:function(){this.fruitPool=new cc.NodePool;for(var t=0;t<2;++t){var i=cc.instantiate(this.fruitPrefab);this.fruitPool.put(i)}this.lastWidth=this.node.width,this.count=0,this.score=0,this.isCreating=!1,this.fruitCount=0,this.isEnd=!1,this.useFinger=!1,this.topBound=20,this.buttomBound=20,this.initPhysics(),this.initBound(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.initOneFruit()},onTouchMove:function(t){if(!this.isCreating){var i,e=this.node.width,n=t.getLocation();n.x<=this.currentFruit.width/2||n.x>=e-this.currentFruit.width/2||(i=n.x-e/2,this.currentFruit.x=i)}},onTouchEnd:function(t){var i=this;if(!this.isCreating)if(this.isEnd)this.currentFruit&&this.currentFruit.removeFromParent(!1);else{this.lastWidth!==this.node.width&&this.initBound(),this.isCreating=!0;var e=this.node,n=e.width,c=(e.height,this.currentFruit),o=t.getLocation(),r=o.x;o.y,r-=n/2,c.x=r,cc.tween(c).by(0,{position:cc.v2(0,0)},{easing:function(t){return 1e5*t*t}}).call(function(){i.startFruitPhysics(c),i.scheduleOnce(function(){var t=i.getNextFruitId();i.initOneFruit(t),i.isCreating=!1},.75)}).start()}},getNextFruitId:function(){return this.fruitCount<3?1:3===this.fruitCount?2:Math.floor(5*Math.random())+1},createFruitJuice:function(t,i,e){cc.audioEngine.play(this.boomAudio,!1,1),cc.audioEngine.play(this.waterAudio,!1,1);var n=cc.instantiate(this.juicePrefab);this.node.addChild(n);var c=this.juices[t-1],o=n.getComponent("Juice");o.init(c),o.showJuice(i,e)},onSameFruitContact:function(t){var i=t.self,e=t.other;e.node.off("sameContact");var n=e.getComponent("Fruit").id;this.fruitPool.put(i.node),this.fruitPool.put(e.node);var c=e.node,o=c.x,r=c.y;this.createFruitJuice(n,cc.v2({x:o,y:r}),e.node.width),this.addScore(n);var a=n+1;if(a<=11){var s=this.createFruitOnPos(o,r,a);this.startFruitPhysics(s),s.scale=0,cc.tween(s).to(.5,{scale:.6},{easing:"backOut"}).start()}else console.log(" todo \u5408\u6210\u4e24\u4e2a\u897f\u74dc \u8fd8\u6ca1\u6709\u5b9e\u73b0\u54e6~ ")},addScore:function(t){this.score+=2*t,this.scoreLabel.string=this.score},startFruitPhysics:function(t){t.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;var i=t.getComponent(cc.PhysicsCircleCollider);i.radius=t.height/2,i.apply()},createOneFruit:function(t){var i=cc.instantiate(this.fruitPrefab),e=this.fruits[t-1];return i.getComponent("Fruit").init({id:e.id,iconSF:e.iconSF}),i.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,i.getComponent(cc.PhysicsCircleCollider).radius=0,this.node.addChild(i),i.scale=.6,i.on("sameContact",this.onSameFruitContact.bind(this)),i.on("checkBound",this.onCheckBound.bind(this)),i},onCheckBound:function(t){var i=this,e=t.self;t.other,setTimeout(function(){e.node.y+e.node.width/2>i.node.y-i.topBound&&(console.log("\u8d85\u51fa\u8303\u56f4\u5566"),i.endNode.y=0,i.endNodeBG.y=0,i.endNode.zIndex=1e3,i.endNodeBG.zIndex=1e3,i.isEnd=!0)},1500)},initPhysics:function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-1e3),cc.director.getCollisionManager().enabled=!0},initBound:function(){var t=this.node.width,i=this.node.height,e=new cc.Node;e.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var n=function(t,i,e,n,c){var o=t.addComponent(cc.PhysicsBoxCollider);o.offset.x=i,o.offset.y=e,o.size.width=n,o.size.height=c};n(e,0,-i/2+this.buttomBound,t,1),n(e,0,i/2,t,1),n(e,-t/2,0,1,i),n(e,t/2,0,1,i),e.parent=this.node},createFruitOnPos:function(t,i,e){void 0===e&&(e=1);var n=this.createOneFruit(e);return n.setPosition(cc.v2(t,i)),n},initOneFruit:function(t){void 0===t&&(t=1),this.fruitCount++,this.currentFruit=this.createFruitOnPos(0,400,t)},start:function(){}}),cc._RF.pop()},{}],Juice:[function(t,i){"use strict";cc._RF.push(i,"9011dmdB6ZOUqZNOO7ReD/J","Juice");var e=function(t,i){return Math.floor(Math.random()*(i-t)+t)};cc.Class({extends:cc.Component,properties:{particle:{default:null,type:cc.SpriteFrame},circle:{default:null,type:cc.SpriteFrame},slash:{default:null,type:cc.SpriteFrame}},start:function(){},init:function(t){this.particle=t.particle,this.circle=t.particle,this.slash=t.slash},showJuice:function(t,i){for(var n=this,c=function(c){var o=new cc.Node("Sprite");o.addComponent(cc.Sprite).spriteFrame=n.particle,o.parent=n.node;var r=359*Math.random(),a=(c=30*Math.random()+i/2,cc.v2(Math.sin(r*Math.PI/180)*c,Math.cos(r*Math.PI/180)*c));o.scale=.5*Math.random()+i/100;var s=.5*Math.random();o.position=t,o.runAction(cc.sequence(cc.spawn(cc.moveBy(s,a),cc.scaleTo(s+.5,.3),cc.rotateBy(s+.5,e(-360,360))),cc.fadeOut(.1),cc.callFunc(function(){o.active=!1},n)))},o=0;o<10;++o)c(o);for(var r=function(){var e=new cc.Node("Sprite");e.addComponent(cc.Sprite).spriteFrame=n.circle,e.parent=n.node;var c=359*Math.random(),o=30*Math.random()+i/2,r=cc.v2(Math.sin(c*Math.PI/180)*o,Math.cos(c*Math.PI/180)*o);e.scale=.5*Math.random()+i/100;var a=.5*Math.random();e.position=t,e.runAction(cc.sequence(cc.spawn(cc.moveBy(a,r),cc.scaleTo(a+.5,.3)),cc.fadeOut(.1),cc.callFunc(function(){e.active=!1},n)))},a=0;a<20;a++)r();var s=new cc.Node("Sprite");s.addComponent(cc.Sprite).spriteFrame=this.slash,s.parent=this.node,s.position=t,s.scale=0,s.angle=e(0,360),s.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,i/150),cc.fadeOut(1)),cc.callFunc(function(){s.active=!1})))}}),cc._RF.pop()},{}]},{},["Fruit","Game","Juice"]);